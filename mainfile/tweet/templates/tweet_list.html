{% extends "layout.html" %}

{% block title %}
Tweet Django
{% endblock title %}

{% block content %}
<h1 class="text-center mt-4">WELCOME TO DJANGO PROJECT</h1>

<!-- Create Tweet Button -->
<div class="text-center my-4">
    {% if user.is_authenticated %}
    <a class="btn btn-primary" href="{% url 'tweet_create' %}">Create Tweet</a>
    {% else %}
    <p>Please <a href="{% url 'login' %}">login</a> to create tweets.</p>
    {% endif %}
</div>

<!-- Tweet List -->
<div class="container">
    <div class="row d-flex flex-wrap justify-content-center gap-4">
        
        {% if tweets %}
            {% for tweet in tweets %}
            <div class="card" style="width: 18rem; margin: 10px;">
                
                <!-- Tweet Image -->
                {% if tweet.img %}
                <img src="{{ tweet.img.url }}" class="card-img-top" alt="Tweet Image">
                {% endif %}
                
                <div class="card-body">
                    <h5 class="card-title">@{{ tweet.user.username }}</h5>
                    <p class="card-text">{{ tweet.content }}</p>
                    <small class="text-muted">{{ tweet.created_at|date:"F d, Y H:i A" }}</small>
                    
                    <!-- Edit & Delete Buttons (Only for the Tweet Owner) -->
                    {% if tweet.user == request.user %}
                    <div class="d-flex justify-content-between mt-3">
                        <a href="{% url 'tweet_edit' tweet.id %}" class="btn btn-sm btn-primary">Edit</a>
                        <a href="{% url 'tweet_delete' tweet.id %}" class="btn btn-sm btn-danger">Delete</a>
                    </div>
                    {% endif %}
                    
                    <a href="{% url 'tweet_detail' tweet.id %}" class="btn btn-sm btn-info mt-2 w-100">View Details</a>
                </div>
            </div>
            {% endfor %}
        {% else %}
            <p class="text-center text-dark">No tweets available. Be the first to post!</p>
        {% endif %}
        
    </div>
</div>
{% endblock content %}

